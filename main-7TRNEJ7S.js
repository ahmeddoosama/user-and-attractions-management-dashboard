import{b as Fe,c as Pe}from"./chunk-2GZSH6TS.js";import"./chunk-NUYAI5UM.js";import{t as Ve,u as Ue,v as Le,w as He}from"./chunk-O3MFJT2T.js";import{a as Te}from"./chunk-ETMCZ2Y3.js";import{a as H,b as _e,c as p,d as Ae,e as Ee,f as ke,g as u}from"./chunk-GGLDWHXY.js";import{C as $e,D as Be,a as U,b as Ce,c as L,e as Y,f as E,g as Re,i as De,m as Ne,n as je}from"./chunk-LD5UOIZG.js";import{O as Oe,P as Ie,R as z,b as Se,c as we,d as Me,la as W}from"./chunk-5SWDGQ7Z.js";import{f as ze,g as R,h as G,m as We,n as X,p as Ye,u as Ge}from"./chunk-UVDT4NFN.js";import{d as V,m as ye,n as xe}from"./chunk-3LVY4AV7.js";import{$a as fe,Ab as o,Bb as a,C as oe,Cb as h,E as ae,Gb as B,Jb as g,Ka as I,Lb as P,Sb as ve,Tb as d,Ub as te,W as se,Wa as pe,Wb as be,Xa as ue,Yb as y,Z as le,Za as m,Zb as _,_b as A,aa as S,ba as ce,bb as N,db as j,fa as D,fb as Q,ga as s,gb as $,j as ne,k as J,la as b,ma as de,pa as me,pb as T,q as re,qa as K,rb as ee,tb as C,va as w,wa as M,wb as F,yb as he,zb as ge}from"./chunk-RF7UUZCQ.js";var k=(t,n)=>{let e=s(u),i=s(p),r=e.isAuthorized(),l=s(W);return r?!0:(l.error("You must be logged in to access this page"),i.navigate(["/login"]))};var Xe=(t,n)=>{let e=s(u),i=s(p);return e.isAuthorized()?i.navigate(["/"]):!0};var Ze=[{path:"dashboard",loadComponent:()=>import("./chunk-DJM4HGE4.js").then(t=>t.DashboardComponent),title:"Dashboard",canActivate:[k]},{path:"profile",loadComponent:()=>import("./chunk-X6GX2AWC.js").then(t=>t.AdminProfileComponent),title:"Profile",canActivate:[k]},{path:"users",loadComponent:()=>import("./chunk-SSUHQW3K.js").then(t=>t.UsersComponent),title:"Users",canActivate:[k]},{path:"attractions",loadComponent:()=>import("./chunk-IRBO5LHY.js").then(t=>t.AttractionsComponent),title:"Attractions",canActivate:[k]},{path:"profile",loadComponent:()=>import("./chunk-X6GX2AWC.js").then(t=>t.AdminProfileComponent),title:"Profile",canActivate:[k]},{path:"login",loadComponent:()=>import("./chunk-O7QA652M.js").then(t=>t.LoginComponent),title:"Login",canActivate:[Xe]},{path:"**",redirectTo:"dashboard",pathMatch:"full"}];var lt="@",ct=(()=>{class t{constructor(e,i,r,l,f){this.doc=e,this.delegate=i,this.zone=r,this.animationType=l,this.moduleImpl=f,this._rendererFactoryPromise=null,this.scheduler=s(N,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-DQQWPPW4.js")).catch(i=>{throw new le(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:r})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let l=new r(this.delegate,this._engine,this.zone);return this.delegate=l,l})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let l=new ie(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(f=>{let q=f.createRenderer(e,i);l.use(q)}).catch(f=>{l.use(r)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){fe()}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})(),ie=class{constructor(n){this.delegate=n,this.replay=[],this.\u0275type=1}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,i,r){this.delegate.insertBefore(n,e,i,r)}removeChild(n,e,i){this.delegate.removeChild(n,e,i)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(n,e,i)),this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(n,e,i)),this.delegate.listen(n,e,i)}shouldReplay(n){return this.replay!==null&&n.startsWith(lt)}};function qe(t="animations"){return Q("NgAsyncAnimations"),me([{provide:j,useFactory:(n,e,i)=>new ct(n,e,i,t),deps:[V,U,$]},{provide:I,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var dt=(()=>{class t extends X{constructor(e,i,r){super(e,i,r,s(N,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||t)(D(V),D(R),D(G))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})();function mt(){return new We}function pt(t,n,e){return new Ge(t,n,e)}var Ke=[{provide:G,useFactory:mt},{provide:X,useClass:dt},{provide:j,useFactory:pt,deps:[U,X,$]}],Je=[{provide:R,useFactory:()=>new Ye},{provide:I,useValue:"BrowserAnimations"},...Ke],ut=[{provide:R,useClass:ze},{provide:I,useValue:"NoopAnimations"},...Ke],Qe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?ut:Je}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=de({type:t})}static{this.\u0275inj=ce({providers:Je,imports:[L]})}}return t})();var et=(t,n)=>{let i=s(u).getToken();if(i){let r=t.clone({headers:t.headers.set("Authorization",`Bearer ${i}`)});return n(r)}return n(t)};var tt=(t,n)=>{let e=s(W),i=s(p),r=s(u);return n(t).pipe(ae(c=>c.error instanceof ErrorEvent?l(c):navigator.onLine?q(c):f(c)));function l(c){let v="Client Error: "+(c.error.message||"An unknown error occurred");return x(c,v)}function f(c){return x(c,"Network Error: Please check your internet connection")}function q(c){let v=c.error?.message||"An unknown error occurred";switch(c.status){case 401:return st(),x(c,"Session expired. Please log in again.");case 404:return x(c,`Not Found: ${v}`);case 400:case 403:case 422:return x(c,`Request Error: ${v}`);case 500:return x(c,`Server Error (${c.status}): ${v}`);default:return x(c,`Unexpected Error (${c.status}): ${v}`)}}function x(c,v){return e.error(v),re(()=>c)}function st(){i.url.includes("login")||(r.logout(),setTimeout(()=>{i.navigateByUrl("/auth/login"),e.error("Your session has expired. Please log in again.")},100))}};Fe.register(...Pe);var it={providers:[Ae(Ze,Ee()),qe(),K(L),K(Qe),Se(Me(),we([et,tt])),u]};var Z=(()=>{class t{constructor(){this.isExpandedSubject=new J(!0),this.isMobileOpenSubject=new J(!1),this.isExpanded$=this.isExpandedSubject.asObservable(),this.isMobileOpen$=this.isMobileOpenSubject.asObservable()}get isExpandedValue(){return this.isExpandedSubject.value}get isMobileOpenValue(){return this.isMobileOpenSubject.value}toggleExpanded(){this.isExpandedSubject.next(!this.isExpandedSubject.value)}toggleMobile(){this.isMobileOpenSubject.next(!this.isMobileOpenSubject.value)}closeMobile(){this.isMobileOpenSubject.next(!1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nt=(()=>{class t{constructor(){this.storageService=s(u),this.router=s(p),this.sidebarService=s(Z),this.admin=null}ngOnInit(){this.admin=this.storageService.getAdmin()}logout(){this.storageService.logout(),this.navigateTo("/login")}navigateTo(e){this.router.navigate([e])}toggleSidebar(){window.innerWidth<=768?this.sidebarService.toggleMobile():this.sidebarService.toggleExpanded()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-header"]],standalone:!0,features:[y],decls:27,vars:5,consts:[["menu","matMenu"],[1,"bg-white","flex","items-center","justify-between","p-4","shadow-sm"],[1,"flex","items-center","gap-2"],["mat-button","",1,"toggle-sidebar-btn",3,"click"],[1,"text-davyGrey","text-2xl","flex","items-center","justify-center"],[1,"block","md:hidden","cursor-pointer","text-primary","tracking-widest","text-lg","uppercase","font-semibold"],[1,"flex","items-center","gap-2",3,"matMenuTriggerFor"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"hidden","md:block"],[1,"mt-2"],["mat-menu-item","",3,"click"]],template:function(i,r){if(i&1){let l=B();o(0,"header",1)(1,"div",2)(2,"button",3),g("click",function(){return w(l),M(r.toggleSidebar())}),o(3,"div",4)(4,"mat-icon"),d(5,"menu"),a()()(),o(6,"h1",5),d(7," WhiteHelmet "),a()(),o(8,"div",2)(9,"button",6),h(10,"img",7),o(11,"span",8),d(12),a(),o(13,"mat-icon"),d(14,"keyboard_arrow_down"),a()(),o(15,"mat-menu",9,0)(17,"button",10),g("click",function(){return w(l),M(r.navigateTo("/profile"))}),o(18,"mat-icon"),d(19,"settings"),a(),o(20,"span"),d(21,"Settings"),a()(),o(22,"button",10),g("click",function(){return w(l),M(r.logout())}),o(23,"mat-icon"),d(24,"logout"),a(),o(25,"span"),d(26,"Logout"),a()()()()()}if(i&2){let l=ve(16);m(9),ee("matMenuTriggerFor",l),m(),ee("src",r.admin==null?null:r.admin.avatar,pe)("alt",(r.admin==null?null:r.admin.fname)+" "+(r.admin==null?null:r.admin.lname)),m(2),be("",r.admin==null?null:r.admin.fname," ",r.admin==null?null:r.admin.lname,"")}},dependencies:[E,Y,z,Oe,He,Ue,Ve,Le],styles:["[_nghost-%COMP%]   .mdc-button[_ngcontent-%COMP%]{min-width:2.5rem}"]})}}return t})();var gt=(t,n)=>n.title;function vt(t,n){t&1&&(o(0,"h1",4),d(1," WhiteHelmet "),a())}function bt(t,n){if(t&1&&(o(0,"span",13),d(1),a()),t&2){let e=P().$implicit,i=P();C("!text-primary",i.isActive(e.path)),m(),te(e.title)}}function yt(t,n){if(t&1){let e=B();o(0,"div",11),g("click",function(){let r=w(e).$implicit,l=P();return M(l.changeActiveTab(r))}),o(1,"div",3)(2,"mat-icon"),d(3),a()(),T(4,bt,2,3,"span",12),_(5,"async"),a()}if(t&2){let e=n.$implicit,i=P();C("bg-lavenderMist",i.isActive(e.path)),m(),C("!text-primary",i.isActive(e.path)),m(2),te(e.icon),m(),F(4,A(5,6,i.isExpanded$)?4:-1)}}var rt=(()=>{class t{constructor(){this.router=s(p),this.activeTabService=s(Te),this.sidebarService=s(Z),this.tabs=[{title:"Dashboard",icon:"dashboard",path:"/dashboard"},{title:"Users",icon:"people",path:"/users"},{title:"Attractions",icon:"attractions",path:"/attractions"}],this.isExpanded$=this.sidebarService.isExpanded$,this.isMobileOpen$=this.sidebarService.isMobileOpen$}handleClick(e){let i=e.target;window.innerWidth<=768&&!i.closest("app-sidebar")&&!i.closest(".toggle-sidebar-btn")&&this.sidebarService.closeMobile()}ngOnInit(){this.routerSubscription=this.router.events.subscribe(e=>{e instanceof H&&this.setActiveTabFromRoute()})}setActiveTabFromRoute(){let e=this.router.url,i=this.tabs.find(r=>r.path===e)||this.tabs[0];this.activeTabService.setActiveTab(i)}isActive(e){return this.router.url===e}changeActiveTab(e){this.router.navigate([e.path]),window.innerWidth<=768&&this.sidebarService.closeMobile(),this.activeTabService.setActiveTab(e)}navigateTo(e){this.router.navigate([e]),window.innerWidth<=768&&this.sidebarService.closeMobile()}toggleSidebar(){window.innerWidth>768?this.sidebarService.isExpandedValue||this.sidebarService.toggleExpanded():this.sidebarService.isMobileOpenValue||this.sidebarService.toggleMobile()}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-sidebar"]],hostBindings:function(i,r){i&1&&g("click",function(f){return r.handleClick(f)},!1,ue)},standalone:!0,features:[y],decls:21,vars:15,consts:[[1,"overlay",3,"click"],[1,"sidebar"],[1,"flex","items-center","justify-start","gap-2","px-4"],[1,"flex","items-center","justify-center","text-secondary","text-2xl"],[1,"cursor-pointer","text-primary","tracking-widest","text-lg","uppercase","font-semibold"],[1,"px-4","mt-7","cursor-pointer",3,"click"],[1,"w-full"],["matTextPrefix","",1,"mr-2"],["matInput","","type","text","placeholder","Filter menu"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-start","gap-2","px-4","py-2","hover:bg-lavenderMist","rounded-lg","cursor-pointer",3,"bg-lavenderMist"],[1,"flex","items-center","justify-start","gap-2","px-4","py-2","hover:bg-lavenderMist","rounded-lg","cursor-pointer",3,"click"],[1,"text-secondary","text-base","font-medium",3,"!text-primary"],[1,"text-secondary","text-base","font-medium"]],template:function(i,r){i&1&&(o(0,"div",0),_(1,"async"),g("click",function(){return r.sidebarService.closeMobile()}),a(),o(2,"aside",1),_(3,"async"),_(4,"async"),o(5,"div",2)(6,"div",3)(7,"mat-icon"),d(8,"leaderboard"),a()(),T(9,vt,2,0,"h1",4),_(10,"async"),a(),o(11,"div",5),g("click",function(){return r.toggleSidebar()}),o(12,"mat-form-field",6)(13,"mat-label"),d(14,"Filter menu"),a(),o(15,"mat-icon",7),d(16,"filter_list"),a(),h(17,"input",8),a()(),o(18,"div",9),he(19,yt,6,8,"div",10,gt),a()()),i&2&&(C("active",A(1,7,r.isMobileOpen$)),m(2),C("expanded",A(3,9,r.isExpanded$))("mobile-open",A(4,11,r.isMobileOpen$)),m(7),F(9,A(10,13,r.isExpanded$)?9:-1),m(10),ge(r.tabs))},dependencies:[E,Y,xe,ye,ke,Be,$e,Ne,Re,De,je],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:40;display:none;--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1));--tw-bg-opacity: 50%}.overlay.active[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.overlay.active[_ngcontent-%COMP%]{display:none}}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:50;min-height:100vh;border-right-width:1px;--tw-border-opacity: 1;border-right-color:rgb(228 233 242 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.25rem .25rem .25rem;transition-property:all;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@media (min-width: 768px){.sidebar[_ngcontent-%COMP%]{position:sticky}}.sidebar[_ngcontent-%COMP%]{width:70px}.sidebar.expanded[_ngcontent-%COMP%]{width:250px}.sidebar.mobile-open[_ngcontent-%COMP%]{width:16rem;--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 768px){.sidebar.mobile-open[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar.mobile-open[_ngcontent-%COMP%]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}}.sidebar[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var ot=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-footer"]],standalone:!0,features:[y],decls:10,vars:0,consts:[[1,"flex","items-center","justify-between","flex-col","md:flex-row","bg-white","p-4","shadow-sm","w-full"],[1,"text-sm","text-secondary"],["href","https://github.com/ahmeddoosama","target","_blank",1,"text-primary"],[1,"flex","items-center","gap-2"],["mat-button","","href","https://www.linkedin.com/in/ahmeddoosama/","target","_blank",1,"text-sm","text-secondary"],["mat-button","","href","https://github.com/ahmeddoosama","target","_blank",1,"text-sm","text-secondary"]],template:function(i,r){i&1&&(o(0,"footer",0)(1,"p",1),d(2,"Designed by "),o(3,"a",2),d(4,"Ahmed Osama Bedawy"),a()(),o(5,"div",3)(6,"a",4),d(7,"LinkedIn"),a(),o(8,"a",5),d(9,"GitHub"),a()()())},dependencies:[E,z,Ie],encapsulation:2})}}return t})();function xt(t,n){t&1&&h(0,"router-outlet")}function St(t,n){t&1&&(o(0,"div",1),h(1,"app-sidebar"),o(2,"div",2),h(3,"app-header"),o(4,"div",3),h(5,"router-outlet"),a(),h(6,"app-footer"),a()())}var wt=["/login","/register","/forgot-password"],at=(()=>{class t{constructor(){this.router=s(p),this.destroy$=new ne,this.isAuthRoute=!1,this.setupRouteListener()}setupRouteListener(){this.router.events.pipe(oe(e=>e instanceof H),se(this.destroy$)).subscribe(()=>{this.isAuthRoute=wt.some(e=>this.router.url.startsWith(e))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-root"]],standalone:!0,features:[y],decls:3,vars:1,consts:[[1,"bg-porcelain","relative","w-full","min-h-screen"],[1,"flex","min-h-screen"],[1,"flex-1","flex","flex-col","transition-all","duration-300","ease-in-out"],[1,"flex-1","p-4","overflow-auto"]],template:function(i,r){i&1&&(o(0,"main",0),T(1,xt,1,0,"router-outlet")(2,St,7,0),a()),i&2&&(m(),F(1,r.isAuthRoute?1:2))},dependencies:[_e,nt,rt,ot]})}}return t})();Ce(at,it).catch(t=>console.error(t));
